<div class="profile-container">
  <div class="profile-header">
    <h1 class="profile-title">Mi Perfil</h1>
  </div>

  <div class="profile-grid">
    <!-- Sección: Datos Personales -->
    <mat-card class="profile-card">
    <mat-card-content>
      @if (loadingPersonal()) {
        <div class="loading-container">
          <mat-icon class="loading-icon">hourglass_empty</mat-icon>
          <p>Cargando información...</p>
        </div>
      }

      @if (!loadingPersonal()) {
        <app-generic-form
          [fields]="personalFields()"
          [formTitle]="'Información Personal'"
          [submitText]="'Guardar Cambios'"
          [initialData]="userProfileData()"
          [readonly]="!editingPersonal()"
          (formSubmit)="updatePersonalData($event)"
        ></app-generic-form>
      }

      <!-- Botones de acción -->
      @if (!loadingPersonal()) {
        <div class="actions-container">
          @if (!editingPersonal()) {
            <button
              mat-raised-button
              color="primary"
              (click)="toggleEditPersonal()"
              class="action-button"
            >
              <mat-icon>edit</mat-icon>
              Editar Información Personal
            </button>
          }

          @if (editingPersonal()) {
            <button
              mat-stroked-button
              color="primary"
              (click)="toggleEditPersonal()"
              class="cancel-button"
            >
              <mat-icon>cancel</mat-icon>
              Cancelar
            </button>
          }
        </div>
      }
    </mat-card-content>
  </mat-card>

  <!-- Sección: Datos Profesionales -->
  <mat-card class="profile-card">
    <mat-card-content>
      @if (loadingProfessional()) {
        <div class="loading-container">
          <mat-icon class="loading-icon">hourglass_empty</mat-icon>
          <p>Cargando información...</p>
        </div>
      }

      @if (!loadingProfessional()) {
        <app-generic-form
          [fields]="professionalFields()"
          [formTitle]="'Información Profesional'"
          [submitText]="'Guardar Cambios'"
          [initialData]="dentistProfileData()"
          [readonly]="!editingProfessional()"
          (formSubmit)="updateProfessionalData($event)"
        ></app-generic-form>
      }

      <!-- Botones de acción -->
      @if (!loadingProfessional()) {
        <div class="actions-container">
          @if (!editingProfessional()) {
            <button
              mat-raised-button
              color="primary"
              (click)="toggleEditProfessional()"
              class="action-button"
            >
              <mat-icon>edit</mat-icon>
              Editar Información Profesional
            </button>
          }

          @if (editingProfessional()) {
            <button
              mat-stroked-button
              color="primary"
              (click)="toggleEditProfessional()"
              class="cancel-button"
            >
              <mat-icon>cancel</mat-icon>
              Cancelar
            </button>
          }
        </div>
      }
    </mat-card-content>
  </mat-card>
  </div>
</div>
